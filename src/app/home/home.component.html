<div class="home">

    <div class="side-container">
        <div class="side-info">
            <h2>DEGREES & SUBJECTS</h2>
            <p>Remember that you can select subjects from both the first semester and the second semester.</p>
        </div>

        <div class="selectors-container">
            <input type="text" placeholder="Filtrar por asignaturas..." [(ngModel)]="filterTerm" (input)="applyFilter()">
            <div class="selectors">
                <h3>DEGREES</h3>
                <div class="degrees" *ngFor="let degree of degrees">
                    <div class="degree" (click)="degree.id ? toggleDegree(degree.id) : null">
                        <h4>{{ degree.name }}</h4>
                    </div>
                    <div *ngIf="selectedDegree === degree.id">
                        <div class="years" *ngFor="let year of getYears(degree.id)">
                            <div class="year" (click)="toggleYear(degree.id, year)">
                                <h5>Año {{ year }}</h5>
                            </div>
                            <div *ngIf="isYearSelected(degree.id, year)">
                                <ul class="subjects">
                                    <li class="subject"
                                    *ngFor="let subject of getSubjects(degree.id, year)"
                                    [ngClass]="getSubjectClass(subject)"
                                    (click)="toggleSubject(subject)">
                                    {{ subject.name }}
                                </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button (click)="reset()">Reset</button>
        </div>
    </div>

    <div class="schedule-container">
        <div class="schedule-buttons">
            <button [ngClass]="{'active': selectedSemester === 1}" (click)="switchSemester(1)">1º Semester</button>
            <button [ngClass]="{'active': selectedSemester === 2}" (click)="switchSemester(2)">2º Semester</button>
        </div>

        <div class="schedule">
            <app-schedule></app-schedule>
        </div>
    </div>

    <div class="side-container">
        <div class="side-info">
            <h2>GENERATE A NEW RESULT</h2>
            <button
            (click)="generateSchedule()"
            [disabled]="!selectedSubjects.length"
            [ngClass]="{'disabled': !selectedSubjects.length}"
            >New Result</button>
        </div>

        <div class="side-info">
            <h2>GENERATE LESS OPTIMAL RESULTS</h2>
            <p>Consider using this option if you do not really like the latest results and want to obtain a less optimal but still valid schedule.</p>
            <p>Every time you use this button, take into account that you may receive worse results. 
                Because of this, it is possible that you will not get any results. 
                In that case, try selecting different subjects or use the 'New Result' button.
            </p>
            <button
            (click)="generateLessOptimalSchedule()"
            [disabled]="!schedulesInfo.length"
            [ngClass]="{'disabled': !schedulesInfo.length}"
            >Less Optimal Result</button>
        </div>

        <div class="side-stats">
            <h2>STATISTICS</h2>
            <p>Free days: {{getFreeDays()}}</p>
            <p>Weekly occupied hours: {{getOccupiedHours()}}</p>
        </div>

        <div class="side-stats">
            <h2>INFORMATION</h2>
            <div *ngFor="let item of showScheduleInfo()">
                <p>Asignatura: {{ item.subject.name }}</p>
                <p>Grupo: {{ item.group.name }}</p>
            </div>
        </div>
    </div>

</div>
